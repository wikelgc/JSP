<%@
	page contentType="text/html; charset=utf-8" 
	session = "true" 
	import = "java.util.ArrayList"
	import = "com.yxq.valuebean.GoodsSingle"
	import = "com.yxq.toolbean.Mytools"
	import = "com.yxq.toolbean.shopCar"
%>
<jsp:useBean id = "myCar" class = "com.yxq.toolbean.shopCar"  scope = "session">
	<jsp:setProperty name = "myCar" property ="*"/>
</jsp:useBean>

<%
	//System.out.println((String)session.getAttribute("action"));

	String action = request.getParameter("action");
	if(action == null){
		System.out.println(action);
		action ="none";
	}
	if(action=="buy"){
	    ArrayList goodslist = (ArrayList)session.getAttribute("goodslist");
		int id = Mytools.strToint(request.getParameter("id"));
		GoodsSingle single = (GoodsSingle)goodslist.get(id);
		myCar.addIten(single);
		System.out.println("buy");
	}	
	else if(action.equals("remove")){
		String name = request.getParameter("name");
		myCar.removeTtem(name);
		response.sendRedirect("shopcar.jsp");
		System.out.println("remove");
	}
	else if(action.equals("clear")){
		//System.out.println("clear");
		myCar.clearCar();	
		response.sendRedirect("shopcar.jsp");
		
	}
	else{
		response.sendRedirect("show.jsp");
		System.out.println(action);
	}
 %>